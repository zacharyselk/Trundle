platform:
  - x64

configuration:
  - Debug

image:
  - Visual Studio 2019

# Dont build with Visual Studio project
build: off

before_build:
  - ps: |
      git submodule update --init --recursive
      mkdir build
      cd build
      $env:generator="Visual Studio 16 2019"
      # if ($env:PLATFORM -eq "x64") {
      #     $env:generator="$env:generator Win64"
      # }
      echo generator="$env:generator"
      cmake ../Engine -G "$env:generator"

build_script:
  - cmake --build .

test_script:
  - ctest -C Debug