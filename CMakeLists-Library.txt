include(ExternalProject)

ExternalProject_Add(glfw
  GIT_REPOSITORY "https://github.com/glfw/glfw.git"
  GIT_TAG "master"

  TEST_COMMAND ""
  CMAKE_CACHE_ARGS
        -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_SOURCE_DIR}/lib
        -DGLFW_BUILD_DOCS=OFF -DGLFW_BUILD_TESTS=OFF
        -DGLFW_BUILD_EXAMPLES=OFF
        -DCMAKE_DEBUG_POSTFIX=_d
)

# TODO: Add TRUNDLE_BUILD_LIB define
ExternalProject_Add(engine
  PREFIX Engine
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/Engine"
  CMAKE_CACHE_ARGS
        -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_SOURCE_DIR}/lib
  DEPENDS glfw
)

ExternalProject_Add(driver
  PREFIX Driver
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/Driver"
  CMAKE_CACHE_ARGS
        -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_SOURCE_DIR}/lib
  INSTALL_COMMAND cmake -E echo "Skipping install step."
  DEPENDS engine
)
